set names utf8;

create table t1 (json json);
show create table t1;


insert into t1 values
('{  }'),
('[  ]'),
('{ "foo" : "bar" }'),
('{ "foo" : "bar", "baz" : "whatever" }'),
('[ 1.2, 0.0, "text", 0, null, true, false ]'),
('[ "string", { "key" : "val", "a" : "b", "c" : [ 10, 9, 8, "seven", 11 ] }]'),
('{ "ăț€": "val1", "âț€":"val2" }');

select json, json_normalize(json) from t1
order by json;


create view v1 as (select json, json_normalize(json) norm_json from t1);
show create view v1;

select * from v1
order by json;

select json_normalize(NULL);
select json_normalize('{ "invalid": "no_close"');


drop table t1;
drop view v1;
